 #ゲーム　#unity 
##### 情報
概要欄:ステータスのあるノベルゲームrpg
ストーリー:[[兵士画家]]
# 仕様書
フォントはMPLUS2
テキストエリアーの文字行数は　**21行でmax**
画面タッチで進めるときは背景の三角が緑色になる
効果音を自由に鳴らせるようにする。
（これで章の音なんかを表現したりする）
FlySheetKeyで何も指定されてないと、それでループ終了
-1を返す。



#### 基礎
talkingで実際にデータを回してるときに、その回してるデータを回しながら改ざんしたりしてるから、**foreachではなくforで回します。**(foreachだと仕様上バグる。)
##### データのロード
addressableとかresorcesは**動的参照**、SerializedFieldは**静的参照**。
静的参照(Serialize)でresorces辺りの非推奨だ何だは考えなくていい。一回だけのprefabとかね。
##### データの扱い
addressableを使用。
フォルダをaddressableに指定することでそれ以下のファイルが自動でアドレスが付与。
[[addressable]]システムからそのシステムを利用できる。
そしてcsvファイルをlibreoffice CALCを用いて操作し、それでゲームの流れを作るので、
==プログラムに渡されるcsvに記録されたKEYから自動的にaddressableシステムを利用してリソースを使う必要がある。==
その為にaddressableで付与されるリソースのアドレスと同じように、
スクリプトでaddressableでフォルダのアドレスを指定したのと同じように、
そのフォルダディレクトリ以下のファイル名(拡張子除く)をすべて取得し、(for eachで回す)
**ファイル名をKEYにその実際のファイルを合わせて入手できるLIST二つを内包した
クラス**にそれを入れれば、実際にcsvに描かれた流れに応じてゲームを実行するような
自動プログラムが作りやすくなる。
##### 共通デザイン覚書　
==**UI=初代macみたいなドット絵デザイン**==
**汎用エフェクト**は魔法陣とか絵を動的に構成したり、アンディーメンテのエフェクトを参考
**文字に対する出現時以外永続的に動かない墓標のようなエフェクト**はまるでボールペンで書いたかのようなエフェクト。
##### クリスタアニメーションのエフェクトの場合
[連番画像を使ったスプライトアニメーション - 赤兎ラボ (hatenablog.com)](https://redrabbitnet.hatenablog.com/entry/2019/01/12/233020)
##### libreOffice Calc Csvについて
- 全てのセルを囲むはチェック必須
空のセルはコンマが二つ並ぶからそれでやる

##### 選択肢ボタン
デザインは初期のままで出るときにちょっとエフェクトがある程度で、
押したときには何もエフェクトも無しに消える。
その代わり**背景エフェクトで**押したときとか、特殊な状況下での選択ボタン出現時に
それで表現する。
==文字裏の薄灰色の更に後ろのエフェクトでボタン周りに囲むようなエフェクトが回る感じ。==
**ボタン自体はしょぼくその周囲の処理で目立たせる感じ。**
つまりは**メイン修飾はボタン周囲エフェクト↓↓↓↓**
##### 周囲エフェクト（背景エフェクト）
文字エリアとの間に文字を読みやすくするための灰色の薄い画像を挟む（エフェクトの見にくさで決める）

選択ボタン
アールエスで敵選ぶみたいな周囲囲み、またはオリジナル
##### 画像出現
~~昔のノベルゲーム風に、切り刻んだものがバワワと~~
~~切られ口から斜めクリッピングされたのが戻るように出現する感じで。~~
普通に元からある奴でやった。
**周囲エフェクト**とかは無しでそれだけ。

##### 省略可能な引数が並んでいたら
cancellationToken: token　みたいに,の後に該当の**引数名:　オブジェクト**　で行ける。
##### 音響
BGMとして意味を持つ合成音声のラジオが流れる
レイコみたいに「ええ、」皆さんこんにちは、
と話し出すニュースキャスター



#### 現在目標
選択肢ボタンを押したらその場にグルグルアニメーションと共に
消えていく文字が映る。
そのグルグルアニメーションをその選択ボタンの行く先によって変えたり(押したときの効果音なんかも合わせて)したいから、とにもかくにもまずはそういった流れに合わせたエフェクトとかをシナリオ雰囲気や分岐に合わせて作れるようにしたいから、**==シナリオ完筆と絵の練習とショート音楽のための理論勉強を頑張る==**

押された選択肢があった場所にはグルグルアニメーションのみを残す
そのprefabを跡地に残しとくってこと　押した位置には選択肢文言と色の違うグルグル囲いアニメーション?

注釈の表示挙動とそれの表示場所




戦闘とかの自動文章を生成する際にそれに
移る機構を考える

- ダンジョンを表すクラスのようなものを利用？
- そのクラス情報の入ったファイルをstorydataから指定する?
- scoopeと違い文章後のみに実行される？
戦闘でhpなんかで死んだ際に、そのままゲームオーバーで遡ってリスタートとかではなく、
そこでまた分岐して行ってしまう、みたいな。




#### ダンジョンなどの戦闘スタイル
**選択肢のボタンはmpなどの条件で出てきたりする。**
つまりmpとかのあれを見て一定周期の挙動を決めて、
mpがある時だけ追加魔法ジャンク行動ができるみたいな。
シークイエストデセンテデュシエルとか、ステストのAM二次創作スターダストみたいな感じ?
#### 選択肢や画像等のウィジェット出現
dotweenでアールエスの地球製造みたいな
（ゴッッ）みたいな効果音と共に
点滅しながら拡大して出現する
#### 選択肢のボタンの後の文字処理
魔法押す　エフェクトが何らかの形で出る
その後の文字はウトナのエンディングみたいに
エフェクト発動しながら下からアニメーションして出てくる
スキル効果音がそれに合うような感じで文字が下から出てくるのはイイ感じ
#### ストーリーの振り返り
わざわざシステムレベルで直近のバックログ
を振り返ったりするように(kindleシステム)するのは
シストオオシストシステムを入れたりすると色々とあれなので、
ストーリーの振り返りは別枠にボタン作って表示する基本的な仕様にする。
つまり弱点とかはプレイヤーは没入感を減らしていかにもなゲームシステムを利用した
バックログまたはストーリー振り返り用文章を見て、弱点などを補足する。
==ストーリー解説用振り返り文章をストーリーとは別に要約して書く必要がある。==
#### イメージ図 スキルとステータス
![[Drawing 2024-03-18 01.24.01.excalidraw]]

#### 文字の構成

- tmpコンポーネントには画像を入れられるので、自作のデザイン絵文字(ビル,！等)を入れる。
- 一文字ずつ出す際に、文字ごとの登場スピード推移は一定の周期を設定する。(範囲ずつで固定)
- 
#### UIトランジション仕様
uiはパッと消えて、
背景のうごめいてる奴は毛色変わって(トランジションなしに再生成)
移動先のUIが流れに準じた方向に出てくる
#### ステータス
運命とか、なんとかとか、名前が付いたものがたまっていって、
その数で力とかが決まる。

#### 画面構成
##### ゲーム開始時
白い画面　ワンプッシュするとテキスト表示
その表示方法は汎用的な出方
**一ページ目を超えると、バックログのボタンが生成される**
そのボタンの名前は分かりやすく「バックログ」で

TLOA 2000年代にうんちゃらかんたｙらら
殷haLギأ戦争で全ての文字を一時的に失っていた
僕らにはその語源を知るすべはもうない。
一説によるとある児童作家が概念を見つけ出したようなんですが。。。([[悪魔の興味]])
僕ら地球人はただその現象によっていつも通り振り回されるだけです。


みたいに自分の見出しや綴りをあくまで主人公の記憶とTLOAの特質に
よるものだと言うことを第一章付近で思い知らせる。

##### 画像
画像をそのまま文字とかの
領域に出力もできる。~~一定のサイズで~~
~~数行をまたいで真ん中あたりに出てくる。~~普通に文字の後ろに出す
背景に出力しないのは、==背景エフェクトを邪魔しないため、==
==可視性を高くしたいよねあとはい==
##### ボタン
感情要素辺りはいいかもしれないけど、
基本的にそれが属性になったりしてシナリオ分岐や与えるスキルと展開と文章の微小な変化だけで、ゲームシステムまで直接関与すると扱いきれません。
~~下四つのボタン部分を、ただの四つ構成ではなく、~~
~~二つの方向を決めて~~
~~その二つのすれ違う矢印に、~~
~~可変式に感情のコントロール層が変化しまくる~~
~~**押す位置によって*感情の進みが変わる***~~
~~当然無操作でも感情は移ろいゆく、まぁそこら辺にも、~~
~~==性格、状態等の要素が絡む==~~
~~**ダンジョン戦闘時には、**~~
~~**その感情によって占められた部分がそのまま**~~
~~**それぞれのスキルボタンに変化する(これもランダム性が絡むが)**~~
![[tloa画面構成.jpg|200]]
##### エフェクトタイプ
- 文字のエフェクトと同様に出てくるタイプ
- 文字のエフェクトとは別にその末尾に本体のアニメーションタイミングで出てくるやつ



##### 雑多
厳密に改行する所を決定してしてしまうと
半端な所で改行されてしまうため、
ある一定の遊び部分を真ん中より下に設けて、
その部分にはみ出ると、**ボタン部分が縮んだりする**のもいいかもしれない、

感情ボタンは
グラデーションまたは下記の矢印型ボタンで表すが、
==他のボタンと同じようにその時その時にしか文章上に現れない==
また、ダンジョンでも同じようにエンカウントしないと出てこない。
バックログは[下記](TLOA(ゲーム#ストーリーの振り返り)に示した通りで、ダンジョンの場合も
前ページの戦闘結果を踏まえた現在の状態が出力される。
勿論リスト末尾に蓄積されてくから最初の方まで振り返れるし、
スライダーを使って一気に振り返れる。
それぞれの一面の状態に適した要約ではなく、
あくまである章の中としての現在の状態が更新されていく感じ。
**つまりバックログのページ数は少ない。**


敵を倒すとスターダンスの死んだ音みたいなのと、
赤い×の表記が倒した敵に関連する文章とともに末尾に配置 

##### ダンジョンでのランダムノイズイベント
ダンジョンで会話が入ると、そのダンジョンで設定されてる有限のランダムイベントが
発生したということ
##### コラージュ体
主人公は==文字引きのTLOA==持ちだと
後半で発覚する
文字システムの中に**コラージュの秋・芸術**が入り込んできて、（アダムスストルカーみたいな感じ）
そいつが文字システムの中で自分のコラージュ体を
使って文字自体に何か変な術をかけたり、
主人公の記した文字めがけて何か放ったりすると、
それで主人公がダメージを食らうかも。
でもあくまで文字システムの中に
ハマるように侵入してるから、
コラージュ体がスキルぽいのを使うたびに
他のキャラと同じく文字の末尾にエフェクトが
出る
コラージュ体を召喚する文字は、
その時の最新のページの場合のみ文字をディスプレイとして
コラージュの体を映し出す。
そうでないバックログ格納時は、召喚文字のプレーンのままで映る




##### 使う物理物
![[IMG20240212115436.jpg]]
##### エフェクト表現について
![[Drawing 2024-02-22 02.17.15.excalidraw]]
上記のは言語スペックが足りないかもしれないので、
**点滅または色の高速rgb値の変化**で円の拡縮を代用するかも。
![[エフェクト案1.excalidraw]]
ファントムオフルを背景常用エフェクトとして多用する
==だから文字が見えやすいように文字のエリアには薄くグレーをかける==
magnetみたいに離れたり再集結したりする　aeでプロトタイプを作ってみよう![[IMG_20240327_022659~2.jpg|100]]
![[ファントムオフルエフェクト.png|200]]
## システム

### 逆さ文字の演出
逆さの文字になってる。。。って言うやつで、
**逆さの文字になってる**の部分を実際に上下反転して描写(タグ指定??)
### サイコパスシステム
シストとオオシストでレベルを上げる
するとトキソプラズマになる()

ノベルの分岐中にそれらシストオーシストをゲット
沢山使うとスキルを得られるが、
保持数が多いとたまにトキソプラズマ化して、
無人度が上がり、変な行動を取るような傾向になる

### 基本システム
感情を操作して戦う。
[[TLOA]]の話なのでノベルゲーという形態を取って、
敵と自分の世界観のぶつかり合いを
制すると、お互いの自分勝手な争いが進んだりする様子をうまく表す。
喜怒哀楽を制御できるが、それを押したことによる
影響は、そのキャラのステータスによる。
どの感情も操作せずに進むと無という感情で進む。
だがキャラの性格によっては、


~~基本的に色んな世界をまばらにする~~
[[タナトリア]]のような概念系の立ち絵を用いる
TLOAのある時代特有の未来的なアルテミス世界観
~~各キャラのエピソードが基本だが、~~
~~その世界特有その視点のキャラ特有の技は~~
~~単純にボタンとして処理する~~
~~その技や形態、作用方式などは当然そのキャラと時代に従う~~
~~ちなみにキャラクターは名前を伏せる~~
~~有名なキャラは後から~~
~~あ、このキャラだったんだって気付く的な~~
~~当然無名キャラも~~
有名なキャラを名前を伏せて出すこともあるかもしれない。
![[Drawing 2024-02-28 22.18.55.excalidraw|300]]




## 音楽
Kanoguti方式のunderground explorer方式みたいにループをたくさん
# ゴミ箱
##### 文字を記すボールペン十字架
アニメーションが細すぎて見えない。余白がほとんどないから。
yokocross1のprefabのanimation完成させる
アニメーションの画像　addressableから←静的参照serializefieldで

背景エフェクトキャンバスを整える。
そしてその具体的な描画方法。
横十字架の生える様なアニメーションを書く。

文字横の心理描写(ギリシャ神話に書いた奴)
特に文字の魔を縫って出てくるのは白黒で判定する自動生成??
![[Drawing 2024-07-06 12.59.44.excalidraw]]